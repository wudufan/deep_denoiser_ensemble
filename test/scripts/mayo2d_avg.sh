#!/bin/bash
#SBATCH --partition=defq
#SBATCH --job-name=mayo2d_avg
#SBATCH --nodelist=gpu-node008
#SBATCH --cpus-per-task=16
#SBATCH --time=0


cd ..
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "-1" --dose_rate "4" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L291_quarter_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/quarter/average/L291" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "1/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "-1" --dose_rate "4" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L143_quarter_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/quarter/average/L143" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "2/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "-1" --dose_rate "4" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L067_quarter_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/quarter/average/L067" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "3/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L291_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_2/average/L291" --dose_rate "2" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "4/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L143_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_2/average/L143" --dose_rate "2" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "5/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L067_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_2/average/L067" --dose_rate "2" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "6/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L291_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_4/average/L291" --dose_rate "4" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "7/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L143_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_4/average/L143" --dose_rate "4" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "8/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L067_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_4/average/L067" --dose_rate "4" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "9/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L291_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_6/average/L291" --dose_rate "6" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "10/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L143_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_6/average/L143" --dose_rate "6" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "11/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L067_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_6/average/L067" --dose_rate "6" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "12/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L291_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_8/average/L291" --dose_rate "8" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "13/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L143_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_8/average/L143" --dose_rate "8" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "14/15"
python3 test2d_average_mayo.py --geometry "../geometry_mayo.cfg" --train_dir "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/train/mayo_2d_3_layer_mean/" --nslice_mean "3" --img_norm "0.019" --islices "0" "-1" --filter "hann" --margin "96" --vmin "-0.16" --vmax "0.24" --N0 "1e5" --checkpoint "25" --tags "l2_depth_3/dose_rate_2,l2_depth_3/dose_rate_4,l2_depth_3/dose_rate_8,l2_depth_3/dose_rate_16" --checkpoint_smooth "l2_depth_3/dose_rate_16/25.h5" --N0_ref "2.5e4" --prj "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/lowdoseCTsets/L067_full_sino.mat" --output "/home/local/PARTNERS/dw640/mnt/women_health_internal/dufan.wu/deep_denoiser_ensemble/test/mayo_2d_3_layer_mean/dose_rate_8/average/L067" --dose_rate "8" --device "0" &>> ./outputs/mayo2d_avg_0.log &
wait
echo "15/15"
wait
cat ./outputs/mayo2d_avg_0.log > ./outputs/mayo2d_avg.log
rm ./outputs/mayo2d_avg_0.log
